{"ast":null,"code":"import { RedirectDialog } from './components/RedirectDialog/RedirectDialog.js';\nimport { getLocation } from './components/util.js';\nimport { CBW_MOBILE_DEEPLINK_URL } from '../../../../core/constants.js';\nexport class WLMobileRelayUI {\n  constructor() {\n    this.attached = false;\n    this.redirectDialog = new RedirectDialog();\n  }\n  attach() {\n    if (this.attached) {\n      throw new Error('Coinbase Wallet SDK UI is already attached');\n    }\n    this.redirectDialog.attach();\n    this.attached = true;\n  }\n  redirectToCoinbaseWallet(walletLinkUrl) {\n    const url = new URL(CBW_MOBILE_DEEPLINK_URL);\n    url.searchParams.append('redirect_url', getLocation().href);\n    if (walletLinkUrl) {\n      url.searchParams.append('wl_url', walletLinkUrl);\n    }\n    const anchorTag = document.createElement('a');\n    anchorTag.target = 'cbw-opener';\n    anchorTag.href = url.href;\n    anchorTag.rel = 'noreferrer noopener';\n    anchorTag.click();\n  }\n  openCoinbaseWalletDeeplink(walletLinkUrl) {\n    // redirect to coinbase wallet immediately to avoid Safari/Chrome popup(deeplink) blocking\n    this.redirectToCoinbaseWallet(walletLinkUrl);\n    setTimeout(() => {\n      this.redirectDialog.present({\n        title: 'Redirecting to Coinbase Wallet...',\n        buttonText: 'Open',\n        onButtonClick: () => {\n          this.redirectToCoinbaseWallet(walletLinkUrl);\n        }\n      });\n    }, 99);\n  }\n  showConnecting(_options) {\n    // it uses the return callback to clear the dialog\n    return () => {\n      this.redirectDialog.clear();\n    };\n  }\n}","map":{"version":3,"names":["RedirectDialog","getLocation","CBW_MOBILE_DEEPLINK_URL","WLMobileRelayUI","constructor","attached","redirectDialog","attach","Error","redirectToCoinbaseWallet","walletLinkUrl","url","URL","searchParams","append","href","anchorTag","document","createElement","target","rel","click","openCoinbaseWalletDeeplink","setTimeout","present","title","buttonText","onButtonClick","showConnecting","_options","clear"],"sources":["../../../../../src/sign/walletlink/relay/ui/WLMobileRelayUI.ts"],"sourcesContent":[null],"mappings":"AAAA,SAASA,cAAc,QAAQ,+CAA+C;AAC9E,SAASC,WAAW,QAAQ,sBAAsB;AAElD,SAASC,uBAAuB,QAAQ,+BAAqB;AAE7D,OAAM,MAAOC,eAAe;EAI1BC,YAAA;IAFQ,KAAAC,QAAQ,GAAG,KAAK;IAGtB,IAAI,CAACC,cAAc,GAAG,IAAIN,cAAc,EAAE;EAC5C;EAEAO,MAAMA,CAAA;IACJ,IAAI,IAAI,CAACF,QAAQ,EAAE;MACjB,MAAM,IAAIG,KAAK,CAAC,4CAA4C,CAAC;IAC/D;IACA,IAAI,CAACF,cAAc,CAACC,MAAM,EAAE;IAC5B,IAAI,CAACF,QAAQ,GAAG,IAAI;EACtB;EAEQI,wBAAwBA,CAACC,aAAsB;IACrD,MAAMC,GAAG,GAAG,IAAIC,GAAG,CAACV,uBAAuB,CAAC;IAE5CS,GAAG,CAACE,YAAY,CAACC,MAAM,CAAC,cAAc,EAAEb,WAAW,EAAE,CAACc,IAAI,CAAC;IAC3D,IAAIL,aAAa,EAAE;MACjBC,GAAG,CAACE,YAAY,CAACC,MAAM,CAAC,QAAQ,EAAEJ,aAAa,CAAC;IAClD;IAEA,MAAMM,SAAS,GAAGC,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC;IAC7CF,SAAS,CAACG,MAAM,GAAG,YAAY;IAC/BH,SAAS,CAACD,IAAI,GAAGJ,GAAG,CAACI,IAAI;IACzBC,SAAS,CAACI,GAAG,GAAG,qBAAqB;IACrCJ,SAAS,CAACK,KAAK,EAAE;EACnB;EAEAC,0BAA0BA,CAACZ,aAAsB;IAC/C;IACA,IAAI,CAACD,wBAAwB,CAACC,aAAa,CAAC;IAE5Ca,UAAU,CAAC,MAAK;MACd,IAAI,CAACjB,cAAc,CAACkB,OAAO,CAAC;QAC1BC,KAAK,EAAE,mCAAmC;QAC1CC,UAAU,EAAE,MAAM;QAClBC,aAAa,EAAEA,CAAA,KAAK;UAClB,IAAI,CAAClB,wBAAwB,CAACC,aAAa,CAAC;QAC9C;OACD,CAAC;IACJ,CAAC,EAAE,EAAE,CAAC;EACR;EAEAkB,cAAcA,CAACC,QAId;IACC;IACA,OAAO,MAAK;MACV,IAAI,CAACvB,cAAc,CAACwB,KAAK,EAAE;IAC7B,CAAC;EACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}