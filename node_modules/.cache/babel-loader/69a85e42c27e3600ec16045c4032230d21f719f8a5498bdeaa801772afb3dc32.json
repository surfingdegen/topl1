{"ast":null,"code":"import _wrapRegExp from \"/Users/mac/Desktop/topl1/frontend/node_modules/@babel/runtime/helpers/esm/wrapRegExp.js\";\nimport _objectSpread from \"/Users/mac/Desktop/topl1/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _objectWithoutProperties from \"/Users/mac/Desktop/topl1/frontend/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nconst _excluded = [\"scheme\", \"statement\"],\n  _excluded2 = [\"chainId\", \"expirationTime\", \"issuedAt\", \"notBefore\", \"requestId\"];\n/**\n * @description Parses EIP-4361 formatted message into message fields object.\n *\n * @see https://eips.ethereum.org/EIPS/eip-4361\n *\n * @returns EIP-4361 fields object\n */\nexport function parseSiweMessage(message) {\n  var _message$match$groups, _message$match, _message$match$groups2, _message$match2, _message$split$;\n  const _ref = (_message$match$groups = (_message$match = message.match(prefixRegex)) === null || _message$match === void 0 ? void 0 : _message$match.groups) !== null && _message$match$groups !== void 0 ? _message$match$groups : {},\n    {\n      scheme,\n      statement\n    } = _ref,\n    prefix = _objectWithoutProperties(_ref, _excluded);\n  const _ref2 = (_message$match$groups2 = (_message$match2 = message.match(suffixRegex)) === null || _message$match2 === void 0 ? void 0 : _message$match2.groups) !== null && _message$match$groups2 !== void 0 ? _message$match$groups2 : {},\n    {\n      chainId,\n      expirationTime,\n      issuedAt,\n      notBefore,\n      requestId\n    } = _ref2,\n    suffix = _objectWithoutProperties(_ref2, _excluded2);\n  const resources = (_message$split$ = message.split('Resources:')[1]) === null || _message$split$ === void 0 ? void 0 : _message$split$.split('\\n- ').slice(1);\n  return _objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread({}, prefix), suffix), chainId ? {\n    chainId: Number(chainId)\n  } : {}), expirationTime ? {\n    expirationTime: new Date(expirationTime)\n  } : {}), issuedAt ? {\n    issuedAt: new Date(issuedAt)\n  } : {}), notBefore ? {\n    notBefore: new Date(notBefore)\n  } : {}), requestId ? {\n    requestId\n  } : {}), resources ? {\n    resources\n  } : {}), scheme ? {\n    scheme\n  } : {}), statement ? {\n    statement\n  } : {});\n}\n// https://regexr.com/80gdj\nconst prefixRegex = /*#__PURE__*/_wrapRegExp(/^(?:([a-zA-Z][a-zA-Z0-9+-.]*):\\/\\/)?([a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\\n)(0x[a-fA-F0-9]{40})\\n\\n(?:(.*)\\n\\n)?/, {\n  scheme: 1,\n  domain: 2,\n  address: 3,\n  statement: 4\n});\n// https://regexr.com/80gf9\nconst suffixRegex = /*#__PURE__*/_wrapRegExp(/(?:URI: (.+))\\n(?:Version: (.+))\\n(?:Chain ID: (\\d+))\\n(?:Nonce: ([a-zA-Z0-9]+))\\n(?:Issued At: (.+))(?:\\nExpiration Time: (.+))?(?:\\nNot Before: (.+))?(?:\\nRequest ID: (.+))?/, {\n  uri: 1,\n  version: 2,\n  chainId: 3,\n  nonce: 4,\n  issuedAt: 5,\n  expirationTime: 6,\n  notBefore: 7,\n  requestId: 8\n});","map":{"version":3,"names":["parseSiweMessage","message","_message$match$groups","_message$match","_message$match$groups2","_message$match2","_message$split$","_ref","match","prefixRegex","groups","scheme","statement","prefix","_objectWithoutProperties","_excluded","_ref2","suffixRegex","chainId","expirationTime","issuedAt","notBefore","requestId","suffix","_excluded2","resources","split","slice","_objectSpread","Number","Date","_wrapRegExp","domain","address","uri","version","nonce"],"sources":["/Users/mac/Desktop/topl1/frontend/node_modules/viem/utils/siwe/parseSiweMessage.ts"],"sourcesContent":["import type { Address } from 'abitype'\n\nimport type { ExactPartial, Prettify } from '../../types/utils.js'\nimport type { SiweMessage } from './types.js'\n\n/**\n * @description Parses EIP-4361 formatted message into message fields object.\n *\n * @see https://eips.ethereum.org/EIPS/eip-4361\n *\n * @returns EIP-4361 fields object\n */\nexport function parseSiweMessage(\n  message: string,\n): Prettify<ExactPartial<SiweMessage>> {\n  const { scheme, statement, ...prefix } = (message.match(prefixRegex)\n    ?.groups ?? {}) as {\n    address: Address\n    domain: string\n    scheme?: string\n    statement?: string\n  }\n  const { chainId, expirationTime, issuedAt, notBefore, requestId, ...suffix } =\n    (message.match(suffixRegex)?.groups ?? {}) as {\n      chainId: string\n      expirationTime?: string\n      issuedAt?: string\n      nonce: string\n      notBefore?: string\n      requestId?: string\n      uri: string\n      version: '1'\n    }\n  const resources = message.split('Resources:')[1]?.split('\\n- ').slice(1)\n  return {\n    ...prefix,\n    ...suffix,\n    ...(chainId ? { chainId: Number(chainId) } : {}),\n    ...(expirationTime ? { expirationTime: new Date(expirationTime) } : {}),\n    ...(issuedAt ? { issuedAt: new Date(issuedAt) } : {}),\n    ...(notBefore ? { notBefore: new Date(notBefore) } : {}),\n    ...(requestId ? { requestId } : {}),\n    ...(resources ? { resources } : {}),\n    ...(scheme ? { scheme } : {}),\n    ...(statement ? { statement } : {}),\n  }\n}\n\n// https://regexr.com/80gdj\nconst prefixRegex =\n  /^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\\/\\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\\n)(?<address>0x[a-fA-F0-9]{40})\\n\\n(?:(?<statement>.*)\\n\\n)?/\n\n// https://regexr.com/80gf9\nconst suffixRegex =\n  /(?:URI: (?<uri>.+))\\n(?:Version: (?<version>.+))\\n(?:Chain ID: (?<chainId>\\d+))\\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\\n(?:Issued At: (?<issuedAt>.+))(?:\\nExpiration Time: (?<expirationTime>.+))?(?:\\nNot Before: (?<notBefore>.+))?(?:\\nRequest ID: (?<requestId>.+))?/\n"],"mappings":";;;;;AAKA;;;;;;;AAOA,OAAM,SAAUA,gBAAgBA,CAC9BC,OAAe;EAAA,IAAAC,qBAAA,EAAAC,cAAA,EAAAC,sBAAA,EAAAC,eAAA,EAAAC,eAAA;EAEf,MAAAC,IAAA,IAAAL,qBAAA,IAAAC,cAAA,GAA0CF,OAAO,CAACO,KAAK,CAACC,WAAW,CAAC,cAAAN,cAAA,uBAA1BA,cAAA,CACtCO,MAAM,cAAAR,qBAAA,cAAAA,qBAAA,GAAI,EAAE;IADV;MAAES,MAAM;MAAEC;IAAoB,CAAE,GAAAL,IAAA;IAARM,MAAM,GAAAC,wBAAA,CAAAP,IAAA,EAAAQ,SAAA;EAOpC,MAAAC,KAAA,IAAAZ,sBAAA,IAAAC,eAAA,GACGJ,OAAO,CAACO,KAAK,CAACS,WAAW,CAAC,cAAAZ,eAAA,uBAA1BA,eAAA,CAA4BK,MAAM,cAAAN,sBAAA,cAAAA,sBAAA,GAAI,EAAE;IADrC;MAAEc,OAAO;MAAEC,cAAc;MAAEC,QAAQ;MAAEC,SAAS;MAAEC;IAAoB,CAAE,GAAAN,KAAA;IAARO,MAAM,GAAAT,wBAAA,CAAAE,KAAA,EAAAQ,UAAA;EAW1E,MAAMC,SAAS,IAAAnB,eAAA,GAAGL,OAAO,CAACyB,KAAK,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,cAAApB,eAAA,uBAA9BA,eAAA,CAAgCoB,KAAK,CAAC,MAAM,CAAC,CAACC,KAAK,CAAC,CAAC,CAAC;EACxE,OAAAC,aAAA,CAAAA,aAAA,CAAAA,aAAA,CAAAA,aAAA,CAAAA,aAAA,CAAAA,aAAA,CAAAA,aAAA,CAAAA,aAAA,CAAAA,aAAA,CAAAA,aAAA,KACKf,MAAM,GACNU,MAAM,GACLL,OAAO,GAAG;IAAEA,OAAO,EAAEW,MAAM,CAACX,OAAO;EAAC,CAAE,GAAG,EAAE,GAC3CC,cAAc,GAAG;IAAEA,cAAc,EAAE,IAAIW,IAAI,CAACX,cAAc;EAAC,CAAE,GAAG,EAAE,GAClEC,QAAQ,GAAG;IAAEA,QAAQ,EAAE,IAAIU,IAAI,CAACV,QAAQ;EAAC,CAAE,GAAG,EAAE,GAChDC,SAAS,GAAG;IAAEA,SAAS,EAAE,IAAIS,IAAI,CAACT,SAAS;EAAC,CAAE,GAAG,EAAE,GACnDC,SAAS,GAAG;IAAEA;EAAS,CAAE,GAAG,EAAE,GAC9BG,SAAS,GAAG;IAAEA;EAAS,CAAE,GAAG,EAAE,GAC9Bd,MAAM,GAAG;IAAEA;EAAM,CAAE,GAAG,EAAE,GACxBC,SAAS,GAAG;IAAEA;EAAS,CAAE,GAAG,EAAE;AAEtC;AAEA;AACA,MAAMH,WAAW,gBAAAsB,WAAA,CACf,kKAA0M;EAAApB,MAAA;EAAAqB,MAAA;EAAAC,OAAA;EAAArB,SAAA;AAAA;AAE5M;AACA,MAAMK,WAAW,gBAAAc,WAAA,CACf,iLAAuQ;EAAAG,GAAA;EAAAC,OAAA;EAAAjB,OAAA;EAAAkB,KAAA;EAAAhB,QAAA;EAAAD,cAAA;EAAAE,SAAA;EAAAC,SAAA;AAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}