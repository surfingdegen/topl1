{"ast":null,"code":"export function withTimeout(fn, _ref) {\n  let {\n    errorInstance = new Error('timed out'),\n    timeout,\n    signal\n  } = _ref;\n  return new Promise((resolve, reject) => {\n    ;\n    (async () => {\n      let timeoutId;\n      try {\n        const controller = new AbortController();\n        if (timeout > 0) {\n          timeoutId = setTimeout(() => {\n            if (signal) {\n              controller.abort();\n            } else {\n              reject(errorInstance);\n            }\n          }, timeout); // need to cast because bun globals.d.ts overrides @types/node\n        }\n        resolve(await fn({\n          signal: (controller === null || controller === void 0 ? void 0 : controller.signal) || null\n        }));\n      } catch (err) {\n        if ((err === null || err === void 0 ? void 0 : err.name) === 'AbortError') reject(errorInstance);\n        reject(err);\n      } finally {\n        clearTimeout(timeoutId);\n      }\n    })();\n  });\n}","map":{"version":3,"names":["withTimeout","fn","_ref","errorInstance","Error","timeout","signal","Promise","resolve","reject","timeoutId","controller","AbortController","setTimeout","abort","err","name","clearTimeout"],"sources":["/Users/mac/Desktop/topl1/frontend/node_modules/viem/utils/promise/withTimeout.ts"],"sourcesContent":["import type { ErrorType } from '../../errors/utils.js'\n\nexport type WithTimeoutErrorType = ErrorType\n\nexport function withTimeout<data>(\n  fn: ({\n    signal,\n  }: {\n    signal: AbortController['signal'] | null\n  }) => Promise<data>,\n  {\n    errorInstance = new Error('timed out'),\n    timeout,\n    signal,\n  }: {\n    // The error instance to throw when the timeout is reached.\n    errorInstance?: Error | undefined\n    // The timeout (in ms).\n    timeout: number\n    // Whether or not the timeout should use an abort signal.\n    signal?: boolean | undefined\n  },\n): Promise<data> {\n  return new Promise((resolve, reject) => {\n    ;(async () => {\n      let timeoutId!: NodeJS.Timeout\n      try {\n        const controller = new AbortController()\n        if (timeout > 0) {\n          timeoutId = setTimeout(() => {\n            if (signal) {\n              controller.abort()\n            } else {\n              reject(errorInstance)\n            }\n          }, timeout) as NodeJS.Timeout // need to cast because bun globals.d.ts overrides @types/node\n        }\n        resolve(await fn({ signal: controller?.signal || null }))\n      } catch (err) {\n        if ((err as Error)?.name === 'AbortError') reject(errorInstance)\n        reject(err)\n      } finally {\n        clearTimeout(timeoutId)\n      }\n    })()\n  })\n}\n"],"mappings":"AAIA,OAAM,SAAUA,WAAWA,CACzBC,EAImB,EAAAC,IAAA,EAYlB;EAAA,IAXD;IACEC,aAAa,GAAG,IAAIC,KAAK,CAAC,WAAW,CAAC;IACtCC,OAAO;IACPC;EAAM,CAQP,GAAAJ,IAAA;EAED,OAAO,IAAIK,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAI;IACrC;IAAC,CAAC,YAAW;MACX,IAAIC,SAA0B;MAC9B,IAAI;QACF,MAAMC,UAAU,GAAG,IAAIC,eAAe,EAAE;QACxC,IAAIP,OAAO,GAAG,CAAC,EAAE;UACfK,SAAS,GAAGG,UAAU,CAAC,MAAK;YAC1B,IAAIP,MAAM,EAAE;cACVK,UAAU,CAACG,KAAK,EAAE;YACpB,CAAC,MAAM;cACLL,MAAM,CAACN,aAAa,CAAC;YACvB;UACF,CAAC,EAAEE,OAAO,CAAmB,EAAC;QAChC;QACAG,OAAO,CAAC,MAAMP,EAAE,CAAC;UAAEK,MAAM,EAAE,CAAAK,UAAU,aAAVA,UAAU,uBAAVA,UAAU,CAAEL,MAAM,KAAI;QAAI,CAAE,CAAC,CAAC;MAC3D,CAAC,CAAC,OAAOS,GAAG,EAAE;QACZ,IAAK,CAAAA,GAAa,aAAbA,GAAa,uBAAbA,GAAa,CAAEC,IAAI,MAAK,YAAY,EAAEP,MAAM,CAACN,aAAa,CAAC;QAChEM,MAAM,CAACM,GAAG,CAAC;MACb,CAAC,SAAS;QACRE,YAAY,CAACP,SAAS,CAAC;MACzB;IACF,CAAC,EAAC,CAAE;EACN,CAAC,CAAC;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}