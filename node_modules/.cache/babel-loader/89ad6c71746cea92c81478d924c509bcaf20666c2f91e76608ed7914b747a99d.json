{"ast":null,"code":"/* eslint-disable @typescript-eslint/no-explicit-any */\n// Copyright (c) 2018-2023 Coinbase, Inc. <https://www.coinbase.com/>\nimport { standardErrors } from '../error/errors.js';\nimport { AddressString, BigIntString, HexString, IntNumber, RegExpString } from './index.js';\nconst INT_STRING_REGEX = /^[0-9]*$/;\nconst HEXADECIMAL_STRING_REGEX = /^[a-f0-9]*$/;\n/**\n * @param length number of bytes\n */\nexport function randomBytesHex(length) {\n  return uint8ArrayToHex(crypto.getRandomValues(new Uint8Array(length)));\n}\nexport function uint8ArrayToHex(value) {\n  return [...value].map(b => b.toString(16).padStart(2, '0')).join('');\n}\nexport function hexStringToUint8Array(hexString) {\n  return new Uint8Array(hexString.match(/.{1,2}/g).map(byte => Number.parseInt(byte, 16)));\n}\nexport function hexStringFromBuffer(buf) {\n  let includePrefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  const hex = buf.toString('hex');\n  return HexString(includePrefix ? \"0x\".concat(hex) : hex);\n}\nexport function encodeToHexString(str) {\n  return hexStringFromBuffer(ensureBuffer(str), true);\n}\nexport function bigIntStringFromBigInt(bi) {\n  return BigIntString(bi.toString(10));\n}\nexport function intNumberFromHexString(hex) {\n  return IntNumber(Number(BigInt(ensureEvenLengthHexString(hex, true))));\n}\nexport function hexStringFromNumber(num) {\n  return HexString(\"0x\".concat(BigInt(num).toString(16)));\n}\nexport function has0xPrefix(str) {\n  return str.startsWith('0x') || str.startsWith('0X');\n}\nexport function strip0x(hex) {\n  if (has0xPrefix(hex)) {\n    return hex.slice(2);\n  }\n  return hex;\n}\nexport function prepend0x(hex) {\n  if (has0xPrefix(hex)) {\n    return \"0x\".concat(hex.slice(2));\n  }\n  return \"0x\".concat(hex);\n}\nexport function isHexString(hex) {\n  if (typeof hex !== 'string') {\n    return false;\n  }\n  const s = strip0x(hex).toLowerCase();\n  return HEXADECIMAL_STRING_REGEX.test(s);\n}\nexport function ensureHexString(hex) {\n  let includePrefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  if (typeof hex === 'string') {\n    const s = strip0x(hex).toLowerCase();\n    if (HEXADECIMAL_STRING_REGEX.test(s)) {\n      return HexString(includePrefix ? \"0x\".concat(s) : s);\n    }\n  }\n  throw standardErrors.rpc.invalidParams(\"\\\"\".concat(String(hex), \"\\\" is not a hexadecimal string\"));\n}\nexport function ensureEvenLengthHexString(hex) {\n  let includePrefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  let h = ensureHexString(hex, false);\n  if (h.length % 2 === 1) {\n    h = HexString(\"0\".concat(h));\n  }\n  return includePrefix ? HexString(\"0x\".concat(h)) : h;\n}\nexport function ensureAddressString(str) {\n  if (typeof str === 'string') {\n    const s = strip0x(str).toLowerCase();\n    if (isHexString(s) && s.length === 40) {\n      return AddressString(prepend0x(s));\n    }\n  }\n  throw standardErrors.rpc.invalidParams(\"Invalid Ethereum address: \".concat(String(str)));\n}\nexport function ensureBuffer(str) {\n  if (Buffer.isBuffer(str)) {\n    return str;\n  }\n  if (typeof str === 'string') {\n    if (isHexString(str)) {\n      const s = ensureEvenLengthHexString(str, false);\n      return Buffer.from(s, 'hex');\n    }\n    return Buffer.from(str, 'utf8');\n  }\n  throw standardErrors.rpc.invalidParams(\"Not binary data: \".concat(String(str)));\n}\nexport function ensureIntNumber(num) {\n  if (typeof num === 'number' && Number.isInteger(num)) {\n    return IntNumber(num);\n  }\n  if (typeof num === 'string') {\n    if (INT_STRING_REGEX.test(num)) {\n      return IntNumber(Number(num));\n    }\n    if (isHexString(num)) {\n      return IntNumber(Number(BigInt(ensureEvenLengthHexString(num, true))));\n    }\n  }\n  throw standardErrors.rpc.invalidParams(\"Not an integer: \".concat(String(num)));\n}\nexport function ensureRegExpString(regExp) {\n  if (regExp instanceof RegExp) {\n    return RegExpString(regExp.toString());\n  }\n  throw standardErrors.rpc.invalidParams(\"Not a RegExp: \".concat(String(regExp)));\n}\nexport function ensureBigInt(val) {\n  if (val !== null && (typeof val === 'bigint' || isBigNumber(val))) {\n    return BigInt(val.toString(10));\n  }\n  if (typeof val === 'number') {\n    return BigInt(ensureIntNumber(val));\n  }\n  if (typeof val === 'string') {\n    if (INT_STRING_REGEX.test(val)) {\n      return BigInt(val);\n    }\n    if (isHexString(val)) {\n      return BigInt(ensureEvenLengthHexString(val, true));\n    }\n  }\n  throw standardErrors.rpc.invalidParams(\"Not an integer: \".concat(String(val)));\n}\nexport function ensureParsedJSONObject(val) {\n  if (typeof val === 'string') {\n    return JSON.parse(val);\n  }\n  if (typeof val === 'object') {\n    return val;\n  }\n  throw standardErrors.rpc.invalidParams(\"Not a JSON string or an object: \".concat(String(val)));\n}\nexport function isBigNumber(val) {\n  if (val == null || typeof val.constructor !== 'function') {\n    return false;\n  }\n  const {\n    constructor\n  } = val;\n  return typeof constructor.config === 'function' && typeof constructor.EUCLID === 'number';\n}\nexport function range(start, stop) {\n  return Array.from({\n    length: stop - start\n  }, (_, i) => start + i);\n}\nexport function getFavicon() {\n  const el = document.querySelector('link[sizes=\"192x192\"]') || document.querySelector('link[sizes=\"180x180\"]') || document.querySelector('link[rel=\"icon\"]') || document.querySelector('link[rel=\"shortcut icon\"]');\n  const {\n    protocol,\n    host\n  } = document.location;\n  const href = el ? el.getAttribute('href') : null;\n  if (!href || href.startsWith('javascript:') || href.startsWith('vbscript:')) {\n    return \"\".concat(protocol, \"//\").concat(host, \"/favicon.ico\"); // fallback\n  }\n  if (href.startsWith('http://') || href.startsWith('https://') || href.startsWith('data:')) {\n    return href;\n  }\n  if (href.startsWith('//')) {\n    return protocol + href;\n  }\n  return \"\".concat(protocol, \"//\").concat(host).concat(href);\n}\nexport function areAddressArraysEqual(arr1, arr2) {\n  return arr1.length === arr2.length && arr1.every((value, index) => value === arr2[index]);\n}","map":{"version":3,"names":["standardErrors","AddressString","BigIntString","HexString","IntNumber","RegExpString","INT_STRING_REGEX","HEXADECIMAL_STRING_REGEX","randomBytesHex","length","uint8ArrayToHex","crypto","getRandomValues","Uint8Array","value","map","b","toString","padStart","join","hexStringToUint8Array","hexString","match","byte","Number","parseInt","hexStringFromBuffer","buf","includePrefix","arguments","undefined","hex","concat","encodeToHexString","str","ensureBuffer","bigIntStringFromBigInt","bi","intNumberFromHexString","BigInt","ensureEvenLengthHexString","hexStringFromNumber","num","has0xPrefix","startsWith","strip0x","slice","prepend0x","isHexString","s","toLowerCase","test","ensureHexString","rpc","invalidParams","String","h","ensureAddressString","Buffer","isBuffer","from","ensureIntNumber","isInteger","ensureRegExpString","regExp","RegExp","ensureBigInt","val","isBigNumber","ensureParsedJSONObject","JSON","parse","constructor","config","EUCLID","range","start","stop","Array","_","i","getFavicon","el","document","querySelector","protocol","host","location","href","getAttribute","areAddressArraysEqual","arr1","arr2","every","index"],"sources":["../../../src/core/type/util.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}