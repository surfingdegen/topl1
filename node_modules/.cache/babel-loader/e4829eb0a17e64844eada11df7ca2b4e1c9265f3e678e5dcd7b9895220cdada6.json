{"ast":null,"code":"import _objectSpread from \"/Users/mac/Desktop/topl1/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _objectWithoutProperties from \"/Users/mac/Desktop/topl1/frontend/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nconst _excluded = [\"authorization\", \"to\"];\nimport { SignatureErc8010 } from 'ox/erc8010';\nimport { numberToHex } from '../encoding/toHex.js';\nimport { isErc8010Signature } from './isErc8010Signature.js';\n/**\n * @description Parses a hex-formatted ERC-8010 flavoured signature.\n * If the signature is not in ERC-8010 format, then the underlying (original) signature is returned.\n *\n * @param signature ERC-8010 signature in hex format.\n * @returns The parsed ERC-8010 signature.\n */\nexport function parseErc8010Signature(signature) {\n  if (!isErc8010Signature(signature)) return {\n    signature\n  };\n  const _SignatureErc8010$unw = SignatureErc8010.unwrap(signature),\n    {\n      authorization: authorization_ox,\n      to\n    } = _SignatureErc8010$unw,\n    rest = _objectWithoutProperties(_SignatureErc8010$unw, _excluded);\n  return _objectSpread(_objectSpread({\n    authorization: {\n      address: authorization_ox.address,\n      chainId: authorization_ox.chainId,\n      nonce: Number(authorization_ox.nonce),\n      r: numberToHex(authorization_ox.r, {\n        size: 32\n      }),\n      s: numberToHex(authorization_ox.s, {\n        size: 32\n      }),\n      yParity: authorization_ox.yParity\n    }\n  }, to ? {\n    address: to\n  } : {}), rest);\n}","map":{"version":3,"names":["SignatureErc8010","numberToHex","isErc8010Signature","parseErc8010Signature","signature","_SignatureErc8010$unw","unwrap","authorization","authorization_ox","to","rest","_objectWithoutProperties","_excluded","_objectSpread","address","chainId","nonce","Number","r","size","s","yParity"],"sources":["/Users/mac/Desktop/topl1/frontend/node_modules/viem/utils/signature/parseErc8010Signature.ts"],"sourcesContent":["import type { Address } from 'abitype'\nimport { SignatureErc8010 } from 'ox/erc8010'\nimport type { ErrorType } from '../../errors/utils.js'\nimport type { SignedAuthorization } from '../../types/authorization.js'\nimport type { Hex } from '../../types/misc.js'\nimport type { OneOf, Prettify } from '../../types/utils.js'\nimport { numberToHex } from '../encoding/toHex.js'\nimport {\n  type IsErc8010SignatureErrorType,\n  isErc8010Signature,\n} from './isErc8010Signature.js'\n\nexport type ParseErc8010SignatureParameters = Hex\n\nexport type ParseErc8010SignatureReturnType = Prettify<\n  OneOf<\n    | {\n        /** Address of the initializer. */\n        address?: Address | undefined\n        /** Authorization signed by the delegatee. */\n        authorization: SignedAuthorization\n        /** Data to initialize the delegation. */\n        data?: Hex | undefined\n        /** The original signature. */\n        signature: Hex\n      }\n    | {\n        /** The original signature. */\n        signature: Hex\n      }\n  >\n>\n\nexport type ParseErc8010SignatureErrorType =\n  | IsErc8010SignatureErrorType\n  | ErrorType\n\n/**\n * @description Parses a hex-formatted ERC-8010 flavoured signature.\n * If the signature is not in ERC-8010 format, then the underlying (original) signature is returned.\n *\n * @param signature ERC-8010 signature in hex format.\n * @returns The parsed ERC-8010 signature.\n */\nexport function parseErc8010Signature(\n  signature: ParseErc8010SignatureParameters,\n): ParseErc8010SignatureReturnType {\n  if (!isErc8010Signature(signature)) return { signature }\n\n  const {\n    authorization: authorization_ox,\n    to,\n    ...rest\n  } = SignatureErc8010.unwrap(signature)\n  return {\n    authorization: {\n      address: authorization_ox.address,\n      chainId: authorization_ox.chainId,\n      nonce: Number(authorization_ox.nonce),\n      r: numberToHex(authorization_ox.r, { size: 32 }),\n      s: numberToHex(authorization_ox.s, { size: 32 }),\n      yParity: authorization_ox.yParity,\n    },\n    ...(to ? { address: to } : {}),\n    ...rest,\n  }\n}\n"],"mappings":";;;AACA,SAASA,gBAAgB,QAAQ,YAAY;AAK7C,SAASC,WAAW,QAAQ,sBAAsB;AAClD,SAEEC,kBAAkB,QACb,yBAAyB;AA2BhC;;;;;;;AAOA,OAAM,SAAUC,qBAAqBA,CACnCC,SAA0C;EAE1C,IAAI,CAACF,kBAAkB,CAACE,SAAS,CAAC,EAAE,OAAO;IAAEA;EAAS,CAAE;EAExD,MAAAC,qBAAA,GAIIL,gBAAgB,CAACM,MAAM,CAACF,SAAS,CAAC;IAJhC;MACJG,aAAa,EAAEC,gBAAgB;MAC/BC;IACO,CACR,GAAAJ,qBAAA;IADIK,IAAI,GAAAC,wBAAA,CAAAN,qBAAA,EAAAO,SAAA;EAET,OAAAC,aAAA,CAAAA,aAAA;IACEN,aAAa,EAAE;MACbO,OAAO,EAAEN,gBAAgB,CAACM,OAAO;MACjCC,OAAO,EAAEP,gBAAgB,CAACO,OAAO;MACjCC,KAAK,EAAEC,MAAM,CAACT,gBAAgB,CAACQ,KAAK,CAAC;MACrCE,CAAC,EAAEjB,WAAW,CAACO,gBAAgB,CAACU,CAAC,EAAE;QAAEC,IAAI,EAAE;MAAE,CAAE,CAAC;MAChDC,CAAC,EAAEnB,WAAW,CAACO,gBAAgB,CAACY,CAAC,EAAE;QAAED,IAAI,EAAE;MAAE,CAAE,CAAC;MAChDE,OAAO,EAAEb,gBAAgB,CAACa;;EAC3B,GACGZ,EAAE,GAAG;IAAEK,OAAO,EAAEL;EAAE,CAAE,GAAG,EAAE,GAC1BC,IAAI;AAEX","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}