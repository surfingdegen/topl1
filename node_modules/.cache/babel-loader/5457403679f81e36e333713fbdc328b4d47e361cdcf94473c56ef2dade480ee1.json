{"ast":null,"code":"import { NAME, VERSION } from '../sdk-info.js';\nimport { standardErrors } from '../core/error/errors.js';\nexport async function fetchRPCRequest(request, rpcUrl) {\n  const requestBody = Object.assign(Object.assign({}, request), {\n    jsonrpc: '2.0',\n    id: crypto.randomUUID()\n  });\n  const res = await window.fetch(rpcUrl, {\n    method: 'POST',\n    body: JSON.stringify(requestBody),\n    mode: 'cors',\n    headers: {\n      'Content-Type': 'application/json',\n      'X-Cbw-Sdk-Version': VERSION,\n      'X-Cbw-Sdk-Platform': NAME\n    }\n  });\n  const {\n    result,\n    error\n  } = await res.json();\n  if (error) throw error;\n  return result;\n}\nfunction getCoinbaseInjectedLegacyProvider() {\n  const window = globalThis;\n  return window.coinbaseWalletExtension;\n}\nfunction getInjectedEthereum() {\n  var _a, _b;\n  try {\n    const window = globalThis;\n    return (_b = (_a = window.top) === null || _a === void 0 ? void 0 : _a.ethereum) !== null && _b !== void 0 ? _b : window.ethereum;\n  } catch (_c) {\n    return undefined;\n  }\n}\nexport function getCoinbaseInjectedProvider(_ref) {\n  let {\n    metadata,\n    preference\n  } = _ref;\n  var _a, _b;\n  const {\n    appName,\n    appLogoUrl,\n    appChainIds\n  } = metadata;\n  if (preference.options !== 'smartWalletOnly') {\n    const extension = getCoinbaseInjectedLegacyProvider();\n    if (extension) {\n      (_a = extension.setAppInfo) === null || _a === void 0 ? void 0 : _a.call(extension, appName, appLogoUrl, appChainIds, preference);\n      return extension;\n    }\n  }\n  const ethereum = getInjectedEthereum();\n  if (ethereum === null || ethereum === void 0 ? void 0 : ethereum.isCoinbaseBrowser) {\n    (_b = ethereum.setAppInfo) === null || _b === void 0 ? void 0 : _b.call(ethereum, appName, appLogoUrl, appChainIds, preference);\n    return ethereum;\n  }\n  return undefined;\n}\n/**\n * Validates the arguments for an invalid request and returns an error if any validation fails.\n * Valid request args are defined here: https://eips.ethereum.org/EIPS/eip-1193#request\n * @param args The request arguments to validate.\n * @returns An error object if the arguments are invalid, otherwise undefined.\n */\nexport function checkErrorForInvalidRequestArgs(args) {\n  if (!args || typeof args !== 'object' || Array.isArray(args)) {\n    throw standardErrors.rpc.invalidParams({\n      message: 'Expected a single, non-array, object argument.',\n      data: args\n    });\n  }\n  const {\n    method,\n    params\n  } = args;\n  if (typeof method !== 'string' || method.length === 0) {\n    throw standardErrors.rpc.invalidParams({\n      message: \"'args.method' must be a non-empty string.\",\n      data: args\n    });\n  }\n  if (params !== undefined && !Array.isArray(params) && (typeof params !== 'object' || params === null)) {\n    throw standardErrors.rpc.invalidParams({\n      message: \"'args.params' must be an object or array if provided.\",\n      data: args\n    });\n  }\n  switch (method) {\n    case 'eth_sign':\n    case 'eth_signTypedData_v2':\n    case 'eth_subscribe':\n    case 'eth_unsubscribe':\n      throw standardErrors.provider.unsupportedMethod();\n  }\n}","map":{"version":3,"names":["NAME","VERSION","standardErrors","fetchRPCRequest","request","rpcUrl","requestBody","Object","assign","jsonrpc","id","crypto","randomUUID","res","window","fetch","method","body","JSON","stringify","mode","headers","result","error","json","getCoinbaseInjectedLegacyProvider","globalThis","coinbaseWalletExtension","getInjectedEthereum","_b","_a","top","ethereum","_c","undefined","getCoinbaseInjectedProvider","_ref","metadata","preference","appName","appLogoUrl","appChainIds","options","extension","setAppInfo","call","isCoinbaseBrowser","checkErrorForInvalidRequestArgs","args","Array","isArray","rpc","invalidParams","message","data","params","length","provider","unsupportedMethod"],"sources":["../../src/util/provider.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}