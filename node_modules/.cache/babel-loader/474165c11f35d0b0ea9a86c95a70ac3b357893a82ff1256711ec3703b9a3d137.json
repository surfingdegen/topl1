{"ast":null,"code":"import _objectSpread from \"/Users/mac/Desktop/topl1/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _objectWithoutProperties from \"/Users/mac/Desktop/topl1/frontend/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nconst _excluded = [\"atomic\", \"chainId\", \"receipts\", \"version\"];\nimport { sliceHex } from '../../utils/data/slice.js';\nimport { trim } from '../../utils/data/trim.js';\nimport { hexToBigInt, hexToNumber } from '../../utils/encoding/fromHex.js';\nimport { receiptStatuses } from '../../utils/formatters/transactionReceipt.js';\nimport { fallbackMagicIdentifier, fallbackTransactionErrorMagicIdentifier } from './sendCalls.js';\n/**\n * Returns the status of a call batch that was sent via `sendCalls`.\n *\n * - Docs: https://viem.sh/docs/actions/wallet/getCallsStatus\n * - JSON-RPC Methods: [`wallet_getCallsStatus`](https://eips.ethereum.org/EIPS/eip-5792)\n *\n * @param client - Client to use\n * @returns Status of the calls. {@link GetCallsStatusReturnType}\n *\n * @example\n * import { createWalletClient, custom } from 'viem'\n * import { mainnet } from 'viem/chains'\n * import { getCallsStatus } from 'viem/actions'\n *\n * const client = createWalletClient({\n *   chain: mainnet,\n *   transport: custom(window.ethereum),\n * })\n * const { receipts, status } = await getCallsStatus(client, { id: '0xdeadbeef' })\n */\nexport async function getCallsStatus(client, parameters) {\n  var _receipts$map;\n  async function getStatus(id) {\n    const isTransactions = id.endsWith(fallbackMagicIdentifier.slice(2));\n    if (isTransactions) {\n      const chainId = trim(sliceHex(id, -64, -32));\n      const hashes = sliceHex(id, 0, -64).slice(2).match(/.{1,64}/g);\n      const receipts = await Promise.all(hashes.map(hash => fallbackTransactionErrorMagicIdentifier.slice(2) !== hash ? client.request({\n        method: 'eth_getTransactionReceipt',\n        params: [\"0x\".concat(hash)]\n      }, {\n        dedupe: true\n      }) : undefined));\n      const status = (() => {\n        if (receipts.some(r => r === null)) return 100; // pending\n        if (receipts.every(r => (r === null || r === void 0 ? void 0 : r.status) === '0x1')) return 200; // success\n        if (receipts.every(r => (r === null || r === void 0 ? void 0 : r.status) === '0x0')) return 500; // complete failure\n        return 600; // partial failure\n      })();\n      return {\n        atomic: false,\n        chainId: hexToNumber(chainId),\n        receipts: receipts.filter(Boolean),\n        status,\n        version: '2.0.0'\n      };\n    }\n    return client.request({\n      method: 'wallet_getCallsStatus',\n      params: [id]\n    });\n  }\n  const _await$getStatus = await getStatus(parameters.id),\n    {\n      atomic = false,\n      chainId,\n      receipts,\n      version = '2.0.0'\n    } = _await$getStatus,\n    response = _objectWithoutProperties(_await$getStatus, _excluded);\n  const [status, statusCode] = (() => {\n    const statusCode = response.status;\n    if (statusCode >= 100 && statusCode < 200) return ['pending', statusCode];\n    if (statusCode >= 200 && statusCode < 300) return ['success', statusCode];\n    if (statusCode >= 300 && statusCode < 700) return ['failure', statusCode];\n    // @ts-expect-error: for backwards compatibility\n    if (statusCode === 'CONFIRMED') return ['success', 200];\n    // @ts-expect-error: for backwards compatibility\n    if (statusCode === 'PENDING') return ['pending', 100];\n    return [undefined, statusCode];\n  })();\n  return _objectSpread(_objectSpread({}, response), {}, {\n    atomic,\n    // @ts-expect-error: for backwards compatibility\n    chainId: chainId ? hexToNumber(chainId) : undefined,\n    receipts: (_receipts$map = receipts === null || receipts === void 0 ? void 0 : receipts.map(receipt => _objectSpread(_objectSpread({}, receipt), {}, {\n      blockNumber: hexToBigInt(receipt.blockNumber),\n      gasUsed: hexToBigInt(receipt.gasUsed),\n      status: receiptStatuses[receipt.status]\n    }))) !== null && _receipts$map !== void 0 ? _receipts$map : [],\n    statusCode,\n    status,\n    version\n  });\n}","map":{"version":3,"names":["sliceHex","trim","hexToBigInt","hexToNumber","receiptStatuses","fallbackMagicIdentifier","fallbackTransactionErrorMagicIdentifier","getCallsStatus","client","parameters","_receipts$map","getStatus","id","isTransactions","endsWith","slice","chainId","hashes","match","receipts","Promise","all","map","hash","request","method","params","concat","dedupe","undefined","status","some","r","every","atomic","filter","Boolean","version","_await$getStatus","response","_objectWithoutProperties","_excluded","statusCode","_objectSpread","receipt","blockNumber","gasUsed"],"sources":["/Users/mac/Desktop/topl1/frontend/node_modules/viem/actions/wallet/getCallsStatus.ts"],"sourcesContent":["import type { Client } from '../../clients/createClient.js'\nimport type { Transport } from '../../clients/transports/createTransport.js'\nimport type { ErrorType } from '../../errors/utils.js'\nimport type { Account } from '../../types/account.js'\nimport type { ExtractCapabilities } from '../../types/capabilities.js'\nimport type { Chain } from '../../types/chain.js'\nimport type { WalletGetCallsStatusReturnType } from '../../types/eip1193.js'\nimport type { Hex } from '../../types/misc.js'\nimport type { RpcTransactionReceipt } from '../../types/rpc.js'\nimport type { Prettify } from '../../types/utils.js'\nimport type { RequestErrorType } from '../../utils/buildRequest.js'\nimport { sliceHex } from '../../utils/data/slice.js'\nimport { trim } from '../../utils/data/trim.js'\nimport { hexToBigInt, hexToNumber } from '../../utils/encoding/fromHex.js'\nimport { receiptStatuses } from '../../utils/formatters/transactionReceipt.js'\nimport {\n  fallbackMagicIdentifier,\n  fallbackTransactionErrorMagicIdentifier,\n} from './sendCalls.js'\n\nexport type GetCallsStatusParameters = { id: string }\n\nexport type GetCallsStatusReturnType = Prettify<\n  Omit<\n    WalletGetCallsStatusReturnType<\n      ExtractCapabilities<'getCallsStatus', 'ReturnType'>,\n      number,\n      bigint,\n      'success' | 'reverted'\n    >,\n    'status'\n  > & {\n    statusCode: number\n    status: 'pending' | 'success' | 'failure' | undefined\n  }\n>\n\nexport type GetCallsStatusErrorType = RequestErrorType | ErrorType\n\n/**\n * Returns the status of a call batch that was sent via `sendCalls`.\n *\n * - Docs: https://viem.sh/docs/actions/wallet/getCallsStatus\n * - JSON-RPC Methods: [`wallet_getCallsStatus`](https://eips.ethereum.org/EIPS/eip-5792)\n *\n * @param client - Client to use\n * @returns Status of the calls. {@link GetCallsStatusReturnType}\n *\n * @example\n * import { createWalletClient, custom } from 'viem'\n * import { mainnet } from 'viem/chains'\n * import { getCallsStatus } from 'viem/actions'\n *\n * const client = createWalletClient({\n *   chain: mainnet,\n *   transport: custom(window.ethereum),\n * })\n * const { receipts, status } = await getCallsStatus(client, { id: '0xdeadbeef' })\n */\nexport async function getCallsStatus<\n  chain extends Chain | undefined,\n  account extends Account | undefined = undefined,\n>(\n  client: Client<Transport, chain, account>,\n  parameters: GetCallsStatusParameters,\n): Promise<GetCallsStatusReturnType> {\n  async function getStatus(id: Hex) {\n    const isTransactions = id.endsWith(fallbackMagicIdentifier.slice(2))\n    if (isTransactions) {\n      const chainId = trim(sliceHex(id, -64, -32))\n      const hashes = sliceHex(id, 0, -64)\n        .slice(2)\n        .match(/.{1,64}/g)\n\n      const receipts = await Promise.all(\n        hashes!.map((hash) =>\n          fallbackTransactionErrorMagicIdentifier.slice(2) !== hash\n            ? client.request(\n                {\n                  method: 'eth_getTransactionReceipt',\n                  params: [`0x${hash}`],\n                },\n                { dedupe: true },\n              )\n            : undefined,\n        ),\n      )\n\n      const status = (() => {\n        if (receipts.some((r) => r === null)) return 100 // pending\n        if (receipts.every((r) => r?.status === '0x1')) return 200 // success\n        if (receipts.every((r) => r?.status === '0x0')) return 500 // complete failure\n        return 600 // partial failure\n      })()\n\n      return {\n        atomic: false,\n        chainId: hexToNumber(chainId),\n        receipts: receipts.filter(Boolean) as RpcTransactionReceipt[],\n        status,\n        version: '2.0.0',\n      }\n    }\n    return client.request({\n      method: 'wallet_getCallsStatus',\n      params: [id],\n    })\n  }\n\n  const {\n    atomic = false,\n    chainId,\n    receipts,\n    version = '2.0.0',\n    ...response\n  } = await getStatus(parameters.id as Hex)\n  const [status, statusCode] = (() => {\n    const statusCode = response.status\n    if (statusCode >= 100 && statusCode < 200)\n      return ['pending', statusCode] as const\n    if (statusCode >= 200 && statusCode < 300)\n      return ['success', statusCode] as const\n    if (statusCode >= 300 && statusCode < 700)\n      return ['failure', statusCode] as const\n    // @ts-expect-error: for backwards compatibility\n    if (statusCode === 'CONFIRMED') return ['success', 200] as const\n    // @ts-expect-error: for backwards compatibility\n    if (statusCode === 'PENDING') return ['pending', 100] as const\n    return [undefined, statusCode]\n  })()\n  return {\n    ...response,\n    atomic,\n    // @ts-expect-error: for backwards compatibility\n    chainId: chainId ? hexToNumber(chainId) : undefined,\n    receipts:\n      receipts?.map((receipt) => ({\n        ...receipt,\n        blockNumber: hexToBigInt(receipt.blockNumber),\n        gasUsed: hexToBigInt(receipt.gasUsed),\n        status: receiptStatuses[receipt.status as '0x0' | '0x1'],\n      })) ?? [],\n    statusCode,\n    status,\n    version,\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}