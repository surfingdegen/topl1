{"ast":null,"code":"import { universalResolverReverseAbi } from '../../constants/abis.js';\nimport { getChainContractAddress } from '../../utils/chain/getChainContractAddress.js';\nimport { isNullUniversalResolverError } from '../../utils/ens/errors.js';\nimport { localBatchGatewayUrl } from '../../utils/ens/localBatchGatewayRequest.js';\nimport { getAction } from '../../utils/getAction.js';\nimport { readContract } from '../public/readContract.js';\n/**\n * Gets primary name for specified address.\n *\n * - Docs: https://viem.sh/docs/ens/actions/getEnsName\n * - Examples: https://stackblitz.com/github/wevm/viem/tree/main/examples/ens\n *\n * Calls `reverse(bytes)` on ENS Universal Resolver Contract to \"reverse resolve\" the address to the primary ENS name.\n *\n * @param client - Client to use\n * @param parameters - {@link GetEnsNameParameters}\n * @returns Name or `null` if not found. {@link GetEnsNameReturnType}\n *\n * @example\n * import { createPublicClient, http } from 'viem'\n * import { mainnet } from 'viem/chains'\n * import { getEnsName } from 'viem/ens'\n *\n * const client = createPublicClient({\n *   chain: mainnet,\n *   transport: http(),\n * })\n * const ensName = await getEnsName(client, {\n *   address: '0xd2135CfB216b74109775236E36d4b433F1DF507B',\n * })\n * // 'wevm.eth'\n */\nexport async function getEnsName(client, parameters) {\n  const {\n    address,\n    blockNumber,\n    blockTag,\n    coinType = 60n,\n    gatewayUrls,\n    strict\n  } = parameters;\n  const {\n    chain\n  } = client;\n  const universalResolverAddress = (() => {\n    if (parameters.universalResolverAddress) return parameters.universalResolverAddress;\n    if (!chain) throw new Error('client chain not configured. universalResolverAddress is required.');\n    return getChainContractAddress({\n      blockNumber,\n      chain,\n      contract: 'ensUniversalResolver'\n    });\n  })();\n  try {\n    const readContractParameters = {\n      address: universalResolverAddress,\n      abi: universalResolverReverseAbi,\n      args: [address, coinType, gatewayUrls !== null && gatewayUrls !== void 0 ? gatewayUrls : [localBatchGatewayUrl]],\n      functionName: 'reverseWithGateways',\n      blockNumber,\n      blockTag\n    };\n    const readContractAction = getAction(client, readContract, 'readContract');\n    const [name] = await readContractAction(readContractParameters);\n    return name || null;\n  } catch (err) {\n    if (strict) throw err;\n    if (isNullUniversalResolverError(err)) return null;\n    throw err;\n  }\n}","map":{"version":3,"names":["universalResolverReverseAbi","getChainContractAddress","isNullUniversalResolverError","localBatchGatewayUrl","getAction","readContract","getEnsName","client","parameters","address","blockNumber","blockTag","coinType","gatewayUrls","strict","chain","universalResolverAddress","Error","contract","readContractParameters","abi","args","functionName","readContractAction","name","err"],"sources":["/Users/mac/Desktop/topl1/frontend/node_modules/viem/actions/ens/getEnsName.ts"],"sourcesContent":["import type { Address } from 'abitype'\n\nimport type { Client } from '../../clients/createClient.js'\nimport type { Transport } from '../../clients/transports/createTransport.js'\nimport { universalResolverReverseAbi } from '../../constants/abis.js'\nimport type { ErrorType } from '../../errors/utils.js'\nimport type { Chain } from '../../types/chain.js'\nimport type { Prettify } from '../../types/utils.js'\nimport {\n  type GetChainContractAddressErrorType,\n  getChainContractAddress,\n} from '../../utils/chain/getChainContractAddress.js'\nimport { isNullUniversalResolverError } from '../../utils/ens/errors.js'\nimport { localBatchGatewayUrl } from '../../utils/ens/localBatchGatewayRequest.js'\nimport type { PacketToBytesErrorType } from '../../utils/ens/packetToBytes.js'\nimport { getAction } from '../../utils/getAction.js'\nimport {\n  type ReadContractErrorType,\n  type ReadContractParameters,\n  readContract,\n} from '../public/readContract.js'\n\nexport type GetEnsNameParameters = Prettify<\n  Pick<ReadContractParameters, 'blockNumber' | 'blockTag'> & {\n    /**\n     * Address to get ENS name for.\n     */\n    address: Address\n    /**\n     * ENSIP-9 compliant coinType (chain) to get ENS name for.\n     *\n     * To get the `coinType` for a chain id, use the `toCoinType` function:\n     * ```ts\n     * import { toCoinType } from 'viem'\n     * import { base } from 'viem/chains'\n     *\n     * const coinType = toCoinType(base.id)\n     * ```\n     *\n     * @default 60n\n     */\n    coinType?: bigint | undefined\n    /**\n     * Universal Resolver gateway URLs to use for resolving CCIP-read requests.\n     */\n    gatewayUrls?: string[] | undefined\n    /**\n     * Whether or not to throw errors propagated from the ENS Universal Resolver Contract.\n     */\n    strict?: boolean | undefined\n    /**\n     * Address of ENS Universal Resolver Contract.\n     */\n    universalResolverAddress?: Address | undefined\n  }\n>\n\nexport type GetEnsNameReturnType = string | null\n\nexport type GetEnsNameErrorType =\n  | GetChainContractAddressErrorType\n  | ReadContractErrorType\n  | PacketToBytesErrorType\n  | ErrorType\n\n/**\n * Gets primary name for specified address.\n *\n * - Docs: https://viem.sh/docs/ens/actions/getEnsName\n * - Examples: https://stackblitz.com/github/wevm/viem/tree/main/examples/ens\n *\n * Calls `reverse(bytes)` on ENS Universal Resolver Contract to \"reverse resolve\" the address to the primary ENS name.\n *\n * @param client - Client to use\n * @param parameters - {@link GetEnsNameParameters}\n * @returns Name or `null` if not found. {@link GetEnsNameReturnType}\n *\n * @example\n * import { createPublicClient, http } from 'viem'\n * import { mainnet } from 'viem/chains'\n * import { getEnsName } from 'viem/ens'\n *\n * const client = createPublicClient({\n *   chain: mainnet,\n *   transport: http(),\n * })\n * const ensName = await getEnsName(client, {\n *   address: '0xd2135CfB216b74109775236E36d4b433F1DF507B',\n * })\n * // 'wevm.eth'\n */\nexport async function getEnsName<chain extends Chain | undefined>(\n  client: Client<Transport, chain>,\n  parameters: GetEnsNameParameters,\n): Promise<GetEnsNameReturnType> {\n  const {\n    address,\n    blockNumber,\n    blockTag,\n    coinType = 60n,\n    gatewayUrls,\n    strict,\n  } = parameters\n  const { chain } = client\n\n  const universalResolverAddress = (() => {\n    if (parameters.universalResolverAddress)\n      return parameters.universalResolverAddress\n    if (!chain)\n      throw new Error(\n        'client chain not configured. universalResolverAddress is required.',\n      )\n    return getChainContractAddress({\n      blockNumber,\n      chain,\n      contract: 'ensUniversalResolver',\n    })\n  })()\n\n  try {\n    const readContractParameters = {\n      address: universalResolverAddress,\n      abi: universalResolverReverseAbi,\n      args: [address, coinType, gatewayUrls ?? [localBatchGatewayUrl]],\n      functionName: 'reverseWithGateways',\n      blockNumber,\n      blockTag,\n    } as const\n\n    const readContractAction = getAction(client, readContract, 'readContract')\n\n    const [name] = await readContractAction(readContractParameters)\n\n    return name || null\n  } catch (err) {\n    if (strict) throw err\n    if (isNullUniversalResolverError(err)) return null\n    throw err\n  }\n}\n"],"mappings":"AAIA,SAASA,2BAA2B,QAAQ,yBAAyB;AAIrE,SAEEC,uBAAuB,QAClB,8CAA8C;AACrD,SAASC,4BAA4B,QAAQ,2BAA2B;AACxE,SAASC,oBAAoB,QAAQ,6CAA6C;AAElF,SAASC,SAAS,QAAQ,0BAA0B;AACpD,SAGEC,YAAY,QACP,2BAA2B;AA6ClC;;;;;;;;;;;;;;;;;;;;;;;;;;AA0BA,OAAO,eAAeC,UAAUA,CAC9BC,MAAgC,EAChCC,UAAgC;EAEhC,MAAM;IACJC,OAAO;IACPC,WAAW;IACXC,QAAQ;IACRC,QAAQ,GAAG,GAAG;IACdC,WAAW;IACXC;EAAM,CACP,GAAGN,UAAU;EACd,MAAM;IAAEO;EAAK,CAAE,GAAGR,MAAM;EAExB,MAAMS,wBAAwB,GAAG,CAAC,MAAK;IACrC,IAAIR,UAAU,CAACQ,wBAAwB,EACrC,OAAOR,UAAU,CAACQ,wBAAwB;IAC5C,IAAI,CAACD,KAAK,EACR,MAAM,IAAIE,KAAK,CACb,oEAAoE,CACrE;IACH,OAAOhB,uBAAuB,CAAC;MAC7BS,WAAW;MACXK,KAAK;MACLG,QAAQ,EAAE;KACX,CAAC;EACJ,CAAC,EAAC,CAAE;EAEJ,IAAI;IACF,MAAMC,sBAAsB,GAAG;MAC7BV,OAAO,EAAEO,wBAAwB;MACjCI,GAAG,EAAEpB,2BAA2B;MAChCqB,IAAI,EAAE,CAACZ,OAAO,EAAEG,QAAQ,EAAEC,WAAW,aAAXA,WAAW,cAAXA,WAAW,GAAI,CAACV,oBAAoB,CAAC,CAAC;MAChEmB,YAAY,EAAE,qBAAqB;MACnCZ,WAAW;MACXC;KACQ;IAEV,MAAMY,kBAAkB,GAAGnB,SAAS,CAACG,MAAM,EAAEF,YAAY,EAAE,cAAc,CAAC;IAE1E,MAAM,CAACmB,IAAI,CAAC,GAAG,MAAMD,kBAAkB,CAACJ,sBAAsB,CAAC;IAE/D,OAAOK,IAAI,IAAI,IAAI;EACrB,CAAC,CAAC,OAAOC,GAAG,EAAE;IACZ,IAAIX,MAAM,EAAE,MAAMW,GAAG;IACrB,IAAIvB,4BAA4B,CAACuB,GAAG,CAAC,EAAE,OAAO,IAAI;IAClD,MAAMA,GAAG;EACX;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}