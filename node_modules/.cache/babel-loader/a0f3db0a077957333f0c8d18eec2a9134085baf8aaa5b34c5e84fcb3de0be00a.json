{"ast":null,"code":"import _objectSpread from \"/Users/mac/Desktop/topl1/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { hexToNumber } from '../encoding/fromHex.js';\nimport { defineFormatter } from './formatter.js';\nexport const transactionType = {\n  '0x0': 'legacy',\n  '0x1': 'eip2930',\n  '0x2': 'eip1559',\n  '0x3': 'eip4844',\n  '0x4': 'eip7702'\n};\nexport function formatTransaction(transaction, _) {\n  const transaction_ = _objectSpread(_objectSpread({}, transaction), {}, {\n    blockHash: transaction.blockHash ? transaction.blockHash : null,\n    blockNumber: transaction.blockNumber ? BigInt(transaction.blockNumber) : null,\n    chainId: transaction.chainId ? hexToNumber(transaction.chainId) : undefined,\n    gas: transaction.gas ? BigInt(transaction.gas) : undefined,\n    gasPrice: transaction.gasPrice ? BigInt(transaction.gasPrice) : undefined,\n    maxFeePerBlobGas: transaction.maxFeePerBlobGas ? BigInt(transaction.maxFeePerBlobGas) : undefined,\n    maxFeePerGas: transaction.maxFeePerGas ? BigInt(transaction.maxFeePerGas) : undefined,\n    maxPriorityFeePerGas: transaction.maxPriorityFeePerGas ? BigInt(transaction.maxPriorityFeePerGas) : undefined,\n    nonce: transaction.nonce ? hexToNumber(transaction.nonce) : undefined,\n    to: transaction.to ? transaction.to : null,\n    transactionIndex: transaction.transactionIndex ? Number(transaction.transactionIndex) : null,\n    type: transaction.type ? transactionType[transaction.type] : undefined,\n    typeHex: transaction.type ? transaction.type : undefined,\n    value: transaction.value ? BigInt(transaction.value) : undefined,\n    v: transaction.v ? BigInt(transaction.v) : undefined\n  });\n  if (transaction.authorizationList) transaction_.authorizationList = formatAuthorizationList(transaction.authorizationList);\n  transaction_.yParity = (() => {\n    // If `yParity` is provided, we will use it.\n    if (transaction.yParity) return Number(transaction.yParity);\n    // If no `yParity` provided, try derive from `v`.\n    if (typeof transaction_.v === 'bigint') {\n      if (transaction_.v === 0n || transaction_.v === 27n) return 0;\n      if (transaction_.v === 1n || transaction_.v === 28n) return 1;\n      if (transaction_.v >= 35n) return transaction_.v % 2n === 0n ? 1 : 0;\n    }\n    return undefined;\n  })();\n  if (transaction_.type === 'legacy') {\n    delete transaction_.accessList;\n    delete transaction_.maxFeePerBlobGas;\n    delete transaction_.maxFeePerGas;\n    delete transaction_.maxPriorityFeePerGas;\n    delete transaction_.yParity;\n  }\n  if (transaction_.type === 'eip2930') {\n    delete transaction_.maxFeePerBlobGas;\n    delete transaction_.maxFeePerGas;\n    delete transaction_.maxPriorityFeePerGas;\n  }\n  if (transaction_.type === 'eip1559') delete transaction_.maxFeePerBlobGas;\n  return transaction_;\n}\nexport const defineTransaction = /*#__PURE__*/defineFormatter('transaction', formatTransaction);\n//////////////////////////////////////////////////////////////////////////////\nfunction formatAuthorizationList(authorizationList) {\n  return authorizationList.map(authorization => ({\n    address: authorization.address,\n    chainId: Number(authorization.chainId),\n    nonce: Number(authorization.nonce),\n    r: authorization.r,\n    s: authorization.s,\n    yParity: Number(authorization.yParity)\n  }));\n}","map":{"version":3,"names":["hexToNumber","defineFormatter","transactionType","formatTransaction","transaction","_","transaction_","_objectSpread","blockHash","blockNumber","BigInt","chainId","undefined","gas","gasPrice","maxFeePerBlobGas","maxFeePerGas","maxPriorityFeePerGas","nonce","to","transactionIndex","Number","type","typeHex","value","v","authorizationList","formatAuthorizationList","yParity","accessList","defineTransaction","map","authorization","address","r","s"],"sources":["/Users/mac/Desktop/topl1/frontend/node_modules/viem/utils/formatters/transaction.ts"],"sourcesContent":["import type { ErrorType } from '../../errors/utils.js'\nimport type { SignedAuthorizationList } from '../../types/authorization.js'\nimport type { BlockTag } from '../../types/block.js'\nimport type {\n  Chain,\n  ExtractChainFormatterExclude,\n  ExtractChainFormatterReturnType,\n} from '../../types/chain.js'\nimport type { Hex } from '../../types/misc.js'\nimport type { RpcAuthorizationList, RpcTransaction } from '../../types/rpc.js'\nimport type { Transaction, TransactionType } from '../../types/transaction.js'\nimport type { ExactPartial, UnionLooseOmit } from '../../types/utils.js'\nimport { hexToNumber } from '../encoding/fromHex.js'\nimport { type DefineFormatterErrorType, defineFormatter } from './formatter.js'\n\ntype TransactionPendingDependencies =\n  | 'blockHash'\n  | 'blockNumber'\n  | 'transactionIndex'\n\nexport type FormattedTransaction<\n  chain extends Chain | undefined = undefined,\n  blockTag extends BlockTag = BlockTag,\n  _FormatterReturnType = ExtractChainFormatterReturnType<\n    chain,\n    'transaction',\n    Transaction\n  >,\n  _ExcludedPendingDependencies extends string = TransactionPendingDependencies &\n    ExtractChainFormatterExclude<chain, 'transaction'>,\n> = UnionLooseOmit<_FormatterReturnType, TransactionPendingDependencies> & {\n  [_K in _ExcludedPendingDependencies]: never\n} & Pick<\n    Transaction<bigint, number, blockTag extends 'pending' ? true : false>,\n    TransactionPendingDependencies\n  >\n\nexport const transactionType = {\n  '0x0': 'legacy',\n  '0x1': 'eip2930',\n  '0x2': 'eip1559',\n  '0x3': 'eip4844',\n  '0x4': 'eip7702',\n} as const satisfies Record<Hex, TransactionType>\n\nexport type FormatTransactionErrorType = ErrorType\n\nexport function formatTransaction(\n  transaction: ExactPartial<RpcTransaction>,\n  _?: string | undefined,\n) {\n  const transaction_ = {\n    ...transaction,\n    blockHash: transaction.blockHash ? transaction.blockHash : null,\n    blockNumber: transaction.blockNumber\n      ? BigInt(transaction.blockNumber)\n      : null,\n    chainId: transaction.chainId ? hexToNumber(transaction.chainId) : undefined,\n    gas: transaction.gas ? BigInt(transaction.gas) : undefined,\n    gasPrice: transaction.gasPrice ? BigInt(transaction.gasPrice) : undefined,\n    maxFeePerBlobGas: transaction.maxFeePerBlobGas\n      ? BigInt(transaction.maxFeePerBlobGas)\n      : undefined,\n    maxFeePerGas: transaction.maxFeePerGas\n      ? BigInt(transaction.maxFeePerGas)\n      : undefined,\n    maxPriorityFeePerGas: transaction.maxPriorityFeePerGas\n      ? BigInt(transaction.maxPriorityFeePerGas)\n      : undefined,\n    nonce: transaction.nonce ? hexToNumber(transaction.nonce) : undefined,\n    to: transaction.to ? transaction.to : null,\n    transactionIndex: transaction.transactionIndex\n      ? Number(transaction.transactionIndex)\n      : null,\n    type: transaction.type\n      ? (transactionType as any)[transaction.type]\n      : undefined,\n    typeHex: transaction.type ? transaction.type : undefined,\n    value: transaction.value ? BigInt(transaction.value) : undefined,\n    v: transaction.v ? BigInt(transaction.v) : undefined,\n  } as Transaction\n\n  if (transaction.authorizationList)\n    transaction_.authorizationList = formatAuthorizationList(\n      transaction.authorizationList,\n    )\n\n  transaction_.yParity = (() => {\n    // If `yParity` is provided, we will use it.\n    if (transaction.yParity) return Number(transaction.yParity)\n\n    // If no `yParity` provided, try derive from `v`.\n    if (typeof transaction_.v === 'bigint') {\n      if (transaction_.v === 0n || transaction_.v === 27n) return 0\n      if (transaction_.v === 1n || transaction_.v === 28n) return 1\n      if (transaction_.v >= 35n) return transaction_.v % 2n === 0n ? 1 : 0\n    }\n\n    return undefined\n  })()\n\n  if (transaction_.type === 'legacy') {\n    delete transaction_.accessList\n    delete transaction_.maxFeePerBlobGas\n    delete transaction_.maxFeePerGas\n    delete transaction_.maxPriorityFeePerGas\n    delete transaction_.yParity\n  }\n  if (transaction_.type === 'eip2930') {\n    delete transaction_.maxFeePerBlobGas\n    delete transaction_.maxFeePerGas\n    delete transaction_.maxPriorityFeePerGas\n  }\n  if (transaction_.type === 'eip1559') delete transaction_.maxFeePerBlobGas\n\n  return transaction_\n}\n\nexport type DefineTransactionErrorType = DefineFormatterErrorType | ErrorType\n\nexport const defineTransaction = /*#__PURE__*/ defineFormatter(\n  'transaction',\n  formatTransaction,\n)\n\n//////////////////////////////////////////////////////////////////////////////\n\nfunction formatAuthorizationList(\n  authorizationList: RpcAuthorizationList,\n): SignedAuthorizationList {\n  return authorizationList.map((authorization) => ({\n    address: (authorization as any).address,\n    chainId: Number(authorization.chainId),\n    nonce: Number(authorization.nonce),\n    r: authorization.r,\n    s: authorization.s,\n    yParity: Number(authorization.yParity),\n  })) as SignedAuthorizationList\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}