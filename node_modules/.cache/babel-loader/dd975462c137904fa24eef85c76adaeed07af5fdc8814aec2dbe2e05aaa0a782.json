{"ast":null,"code":"import { AbiDecodingZeroDataError } from '../../errors/abi.js';\nimport { BaseError } from '../../errors/base.js';\nimport { ContractFunctionExecutionError, ContractFunctionRevertedError, ContractFunctionZeroDataError, RawContractError } from '../../errors/contract.js';\nimport { RpcRequestError } from '../../errors/request.js';\nimport { InternalRpcError, InvalidInputRpcError } from '../../errors/rpc.js';\nconst EXECUTION_REVERTED_ERROR_CODE = 3;\nexport function getContractError(err, _ref) {\n  let {\n    abi,\n    address,\n    args,\n    docsPath,\n    functionName,\n    sender\n  } = _ref;\n  const error = err instanceof RawContractError ? err : err instanceof BaseError ? err.walk(err => 'data' in err) || err.walk() : {};\n  const {\n    code,\n    data,\n    details,\n    message,\n    shortMessage\n  } = error;\n  const cause = (() => {\n    if (err instanceof AbiDecodingZeroDataError) return new ContractFunctionZeroDataError({\n      functionName\n    });\n    if ([EXECUTION_REVERTED_ERROR_CODE, InternalRpcError.code].includes(code) && (data || details || message || shortMessage) || code === InvalidInputRpcError.code && details === 'execution reverted' && data) {\n      return new ContractFunctionRevertedError({\n        abi,\n        data: typeof data === 'object' ? data.data : data,\n        functionName,\n        message: error instanceof RpcRequestError ? details : shortMessage !== null && shortMessage !== void 0 ? shortMessage : message\n      });\n    }\n    return err;\n  })();\n  return new ContractFunctionExecutionError(cause, {\n    abi,\n    args,\n    contractAddress: address,\n    docsPath,\n    functionName,\n    sender\n  });\n}","map":{"version":3,"names":["AbiDecodingZeroDataError","BaseError","ContractFunctionExecutionError","ContractFunctionRevertedError","ContractFunctionZeroDataError","RawContractError","RpcRequestError","InternalRpcError","InvalidInputRpcError","EXECUTION_REVERTED_ERROR_CODE","getContractError","err","_ref","abi","address","args","docsPath","functionName","sender","error","walk","code","data","details","message","shortMessage","cause","includes","contractAddress"],"sources":["/Users/mac/Desktop/topl1/frontend/node_modules/viem/utils/errors/getContractError.ts"],"sourcesContent":["import type { Abi, Address } from 'abitype'\n\nimport { AbiDecodingZeroDataError } from '../../errors/abi.js'\nimport { BaseError } from '../../errors/base.js'\nimport {\n  ContractFunctionExecutionError,\n  type ContractFunctionExecutionErrorType,\n  ContractFunctionRevertedError,\n  type ContractFunctionRevertedErrorType,\n  ContractFunctionZeroDataError,\n  type ContractFunctionZeroDataErrorType,\n  RawContractError,\n} from '../../errors/contract.js'\nimport { RpcRequestError } from '../../errors/request.js'\nimport { InternalRpcError, InvalidInputRpcError } from '../../errors/rpc.js'\nimport type { ErrorType } from '../../errors/utils.js'\n\nconst EXECUTION_REVERTED_ERROR_CODE = 3\n\nexport type GetContractErrorReturnType<cause = ErrorType> = Omit<\n  ContractFunctionExecutionErrorType,\n  'cause'\n> & {\n  cause:\n    | cause\n    | ContractFunctionZeroDataErrorType\n    | ContractFunctionRevertedErrorType\n}\n\nexport function getContractError<err extends ErrorType<string>>(\n  err: err,\n  {\n    abi,\n    address,\n    args,\n    docsPath,\n    functionName,\n    sender,\n  }: {\n    abi: Abi\n    args: any\n    address?: Address | undefined\n    docsPath?: string | undefined\n    functionName: string\n    sender?: Address | undefined\n  },\n): GetContractErrorReturnType {\n  const error = (\n    err instanceof RawContractError\n      ? err\n      : err instanceof BaseError\n        ? err.walk((err) => 'data' in (err as Error)) || err.walk()\n        : {}\n  ) as BaseError\n  const { code, data, details, message, shortMessage } =\n    error as RawContractError\n\n  const cause = (() => {\n    if (err instanceof AbiDecodingZeroDataError)\n      return new ContractFunctionZeroDataError({ functionName })\n    if (\n      ([EXECUTION_REVERTED_ERROR_CODE, InternalRpcError.code].includes(code) &&\n        (data || details || message || shortMessage)) ||\n      (code === InvalidInputRpcError.code &&\n        details === 'execution reverted' &&\n        data)\n    ) {\n      return new ContractFunctionRevertedError({\n        abi,\n        data: typeof data === 'object' ? data.data : data,\n        functionName,\n        message:\n          error instanceof RpcRequestError\n            ? details\n            : (shortMessage ?? message),\n      })\n    }\n    return err\n  })()\n\n  return new ContractFunctionExecutionError(cause as BaseError, {\n    abi,\n    args,\n    contractAddress: address,\n    docsPath,\n    functionName,\n    sender,\n  }) as GetContractErrorReturnType\n}\n"],"mappings":"AAEA,SAASA,wBAAwB,QAAQ,qBAAqB;AAC9D,SAASC,SAAS,QAAQ,sBAAsB;AAChD,SACEC,8BAA8B,EAE9BC,6BAA6B,EAE7BC,6BAA6B,EAE7BC,gBAAgB,QACX,0BAA0B;AACjC,SAASC,eAAe,QAAQ,yBAAyB;AACzD,SAASC,gBAAgB,EAAEC,oBAAoB,QAAQ,qBAAqB;AAG5E,MAAMC,6BAA6B,GAAG,CAAC;AAYvC,OAAM,SAAUC,gBAAgBA,CAC9BC,GAAQ,EAAAC,IAAA,EAeP;EAAA,IAdD;IACEC,GAAG;IACHC,OAAO;IACPC,IAAI;IACJC,QAAQ;IACRC,YAAY;IACZC;EAAM,CAQP,GAAAN,IAAA;EAED,MAAMO,KAAK,GACTR,GAAG,YAAYN,gBAAgB,GAC3BM,GAAG,GACHA,GAAG,YAAYV,SAAS,GACtBU,GAAG,CAACS,IAAI,CAAET,GAAG,IAAK,MAAM,IAAKA,GAAa,CAAC,IAAIA,GAAG,CAACS,IAAI,EAAE,GACzD,EACM;EACd,MAAM;IAAEC,IAAI;IAAEC,IAAI;IAAEC,OAAO;IAAEC,OAAO;IAAEC;EAAY,CAAE,GAClDN,KAAyB;EAE3B,MAAMO,KAAK,GAAG,CAAC,MAAK;IAClB,IAAIf,GAAG,YAAYX,wBAAwB,EACzC,OAAO,IAAII,6BAA6B,CAAC;MAAEa;IAAY,CAAE,CAAC;IAC5D,IACG,CAACR,6BAA6B,EAAEF,gBAAgB,CAACc,IAAI,CAAC,CAACM,QAAQ,CAACN,IAAI,CAAC,KACnEC,IAAI,IAAIC,OAAO,IAAIC,OAAO,IAAIC,YAAY,CAAC,IAC7CJ,IAAI,KAAKb,oBAAoB,CAACa,IAAI,IACjCE,OAAO,KAAK,oBAAoB,IAChCD,IAAK,EACP;MACA,OAAO,IAAInB,6BAA6B,CAAC;QACvCU,GAAG;QACHS,IAAI,EAAE,OAAOA,IAAI,KAAK,QAAQ,GAAGA,IAAI,CAACA,IAAI,GAAGA,IAAI;QACjDL,YAAY;QACZO,OAAO,EACLL,KAAK,YAAYb,eAAe,GAC5BiB,OAAO,GACNE,YAAY,aAAZA,YAAY,cAAZA,YAAY,GAAID;OACxB,CAAC;IACJ;IACA,OAAOb,GAAG;EACZ,CAAC,EAAC,CAAE;EAEJ,OAAO,IAAIT,8BAA8B,CAACwB,KAAkB,EAAE;IAC5Db,GAAG;IACHE,IAAI;IACJa,eAAe,EAAEd,OAAO;IACxBE,QAAQ;IACRC,YAAY;IACZC;GACD,CAA+B;AAClC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}